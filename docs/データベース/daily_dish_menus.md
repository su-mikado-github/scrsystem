# 日別料理メニュー (daily_dish_menus)

## テーブル情報

| 項目                           | 値                                                                                                   |
|:-------------------------------|:-----------------------------------------------------------------------------------------------------|
| システム名                     | 学食予約システム                                                                                     |
| サブシステム名                 |                                                                                                      |
| 論理エンティティ名             | 日別料理メニュー                                                                                     |
| 物理エンティティ名             | daily_dish_menus                                                                                     |
| 作成者                         | Shuji Ushiyama                                                                                       |
| 作成日                         | 2023/06/25                                                                                           |
| タグ                           | ビュー                                                                                               |



## カラム情報

| No. | 論理名                         | 物理名                         | データ型                       | Not Null | デフォルト           | 備考                           |
|----:|:-------------------------------|:-------------------------------|:-------------------------------|:---------|:---------------------|:-------------------------------|
|   1 | カレンダーID                   | calendar_id                    |                                |          |                      |                                |
|   2 | 日付                           | date                           |                                |          |                      |                                |
|   3 | 年                             | year                           |                                |          |                      |                                |
|   4 | 月                             | month                          |                                |          |                      |                                |
|   5 | 日                             | day                            |                                |          |                      |                                |
|   6 | 料理種別                       | dish_type                      |                                |          |                      |                                |
|   7 | 料理メニュー名                 | name                           |                                |          |                      |                                |
|   8 | エネルギー                     | energy                         |                                |          |                      |                                |
|   9 | 炭水化物                       | carbohydrates                  |                                |          |                      |                                |
|  10 | たんぱく質                     | protein                        |                                |          |                      |                                |
|  11 | 脂質                           | lipid                          |                                |          |                      |                                |
|  12 | 食物繊維                       | dietary_fiber                  |                                |          |                      |                                |



## ソース
```
SELECT
    T.calendar_id -- カレンダーID
    , T1.date -- 日付
    , T1.year -- 年
    , T1.month -- 月
    , T1.day -- 日
    , T.dish_type -- 料理種別
    , GROUP_CONCAT(T.name ORDER BY T.display_order SEPARATOR '/') as name -- 料理メニュー名
    , SUM(T.energy) AS energy -- エネルギー
    , SUM(T.carbohydrates) AS carbohydrates -- 炭水化物
    , SUM(T.protein) AS protein -- たんぱく質
    , SUM(T.lipid) AS lipid -- 脂質
    , SUM(T.dietary_fiber) AS dietary_fiber -- 食物繊維
FROM
    dish_menus T
    INNER JOIN calendars T1 ON (
        T1.id = T.calendar_id
        AND T1.is_delete = 0
    )
WHERE
    T.is_delete = 0
GROUP BY
    T.calendar_id
    , T.dish_type

```



## インデックス情報

| No. | インデックス名                 | カラムリスト                             | ユニーク   | オプション                     | 
|----:|:-------------------------------|:-----------------------------------------|:-----------|:-------------------------------|



## リレーションシップ情報

| No. | 動詞句                         | カラムリスト                             | 参照先                         | 参照先カラムリスト                       |
|----:|:-------------------------------|:-----------------------------------------|:-------------------------------|:-----------------------------------------|
|   1 |                                | calendar_id                              | calendars                      | id                                       |



## リレーションシップ情報(PK側)

| No. | 動詞句                         | カラムリスト                             | 参照元                         | 参照元カラムリスト                       |
|----:|:-------------------------------|:-----------------------------------------|:-------------------------------|:-----------------------------------------|
|   1 |                                | calendar_id,dish_type                    | dish_menus                     | calendar_id,dish_type                    |


